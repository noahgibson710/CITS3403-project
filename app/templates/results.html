{% extends "base.html" %} {% block title %}Calorie Intake Time Series{% endblock
%} {% block content %}
<section>
  <h1>Your Health Macro Results</h1>
  <div
    id="results-container"
    style="text-align: center; font-size: 1.1rem; margin-top: 2rem"
  >
    <!-- The JS will inject the most recent result and the Save/Recalculate buttons here if there is a new calculation -->
  </div>
  {% if macro_posts and macro_posts|length > 0 %}
  <div class="macro-history">
    <ul>
      {% for post in macro_posts %}
      <li>
        <div class="info">
          <p>
            <strong>Date:</strong> {{ post.timestamp.strftime('%Y-%m-%d %H:%M')
            }}
          </p>
          <p><strong>Gender:</strong> {{ post.gender|capitalize }}</p>
          <p><strong>Age:</strong> {{ post.age }}</p>
          <p><strong>Weight:</strong> {{ post.weight }} kg</p>
          <p><strong>Height:</strong> {{ post.height }} cm</p>
          <p><strong>BMR:</strong> {{ post.bmr }} calories/day</p>
          <p><strong>TDEE:</strong> {{ post.tdee }} calories/day</p>
          <p>
            <strong>Calorie Goal:</strong> {{ post.calorie_goal|capitalize }}
          </p>
        </div>
        <div class="actions">
          <form
            action="{{ url_for('delete_macro_post', post_id=post.id) }}"
            method="POST"
          >
            <button
              type="submit"
              onclick="return confirm('Are you sure you want to delete this entry?');"
            >
              Delete
            </button>
          </form>
          <form
            action="{{ url_for('create_feed_post', post_id=post.id) }}"
            method="POST"
          >
            <button type="submit" style="background-color: green">
              Share to Community Feed
            </button>
          </form>
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
  {% else %}
  <div
    class="no-results-message"
    style="text-align: center; font-size: 1.1rem; margin-top: 2rem"
  >
    <p style="color: #ff6b6b">
      ‚ùå No results found. Please calculate your macros first on the
      <a href="/calculator" style="color: #6bffff; text-decoration: underline"
        >Macro Calc</a
      >
      page.
    </p>
  </div>
  {% endif %}
</section>

<script src="{{ url_for('static', filename='js/results.js') }}"></script>
{% endblock %}
